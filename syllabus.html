<!DOCTYPE html>
<html lang="ta">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>பாடத்திட்டம்</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <h1>பாடத்திட்டம்</h1>
    </header>
    <main>
      <div id="syllabus-container" class="container"></div>
      <button onclick="downloadQuestions()">வினாக்களை பதிவிறக்கவும்</button>
      <!-- Download button -->
    </main>
    <center>
      <button
        style="width: 90px; height: 30px; padding: 2px"
        onclick="redirectToAdminPage()"
      >
        Admin
      </button>
    </center>
    <script>
      function loadAssessmentData() {
        const assessmentData = JSON.parse(
          localStorage.getItem("assessmentData")
        );
        const syllabusContainer = document.getElementById("syllabus-container");

        if (assessmentData) {
          syllabusContainer.innerHTML += `<h2>${assessmentData.subject}</h2>`;
          syllabusContainer.innerHTML += `<p>மொத்த மதிப்பெண்கள்: ${assessmentData.totalMarks}</p>`;
          syllabusContainer.innerHTML += `<p>குறிப்புகள்: ${assessmentData.instructions}</p>`;
          syllabusContainer.innerHTML += `<p>தேர்வு நேரம்: ${assessmentData.duration} நிமிடங்கள்</p>`;

          // Display MCQs
          assessmentData.mcqs.forEach((mcq) => {
            syllabusContainer.innerHTML += `<div>
                        <h3>MCQ: ${mcq.question}</h3>
                        <p>A: ${mcq.options.A}</p>
                        <p>B: ${mcq.options.B}</p>
                        <p>C: ${mcq.options.C}</p>
                        <p>D: ${mcq.options.D}</p>
                    </div>`;
          });

          // Display Short Answers
          assessmentData.shortAnswers.forEach((answer) => {
            syllabusContainer.innerHTML += `<div>
                        <h3>குறுகிய பதில் கேள்வி: ${answer.question}</h3>
                    </div>`;
          });

          // Display Long Answers
          assessmentData.longAnswers.forEach((answer) => {
            syllabusContainer.innerHTML += `<div>
                        <h3>விளக்கமான பதில் கேள்வி: ${answer.question}</h3>
                    </div>`;
          });
        } else {
          syllabusContainer.innerHTML = `<p>எந்த தகவலும் கிடைக்கவில்லை.</p>`;
        }
      }

      function downloadQuestions() {
        const assessmentData = JSON.parse(
          localStorage.getItem("assessmentData")
        );
        let content = `பாடம்: ${assessmentData.subject}\n`;
        content += `மொத்த மதிப்பெண்கள்: ${assessmentData.totalMarks}\n`;
        content += `குறிப்புகள்: ${assessmentData.instructions}\n`;
        content += `தேர்வு நேரம்: ${assessmentData.duration} நிமிடங்கள்\n\n`;

        // MCQs
        assessmentData.mcqs.forEach((mcq, index) => {
          content += `MCQ ${index + 1}: ${mcq.question}\n`;
          content += `A: ${mcq.options.A}\n`;
          content += `B: ${mcq.options.B}\n`;
          content += `C: ${mcq.options.C}\n`;
          content += `D: ${mcq.options.D}\n\n`;
        });

        // Short Answers
        assessmentData.shortAnswers.forEach((answer, index) => {
          content += `குறுகிய பதில் கேள்வி ${index + 1}: ${
            answer.question
          }\n\n`;
        });

        // Long Answers
        assessmentData.longAnswers.forEach((answer, index) => {
          content += `விளக்கமான பதில் கேள்வி ${index + 1}: ${
            answer.question
          }\n\n`;
        });

        const blob = new Blob([content], { type: "text/plain" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "questions.txt"; // File name for the download
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
      }

      function redirectToAdminPage() {
        // Redirect to Admin page
        window.location.href = "admin.html"; // Change to your actual admin page
      }

      // Load assessment data when the page loads
      window.onload = loadAssessmentData;
    </script>
  </body>
</html>
